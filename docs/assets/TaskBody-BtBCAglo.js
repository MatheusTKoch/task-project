import{_ as A,r as c,o as q,c as m,a as v,b as f,d as s,w as _,e as R,B as z,f as H,v as L,g as M,h as B,u as U,i as F,j as K,k as N,l as G,q as J,m as O,n as P,p as C,s as Q,t as W,F as X,x as Y,y as Z,z as n,I as y,A as ee,C as D,D as te,E as se,G as ae,H as le,J as oe,K as ne}from"./index-BPB5xokv.js";const re={class:"dark:bg-gray-900"},ie={class:"my-4"},ue={__name:"BodyHeader",setup(V){const r=c(""),h=F(),l=U();function p(){h.dispatch("submitData",r.value),r.value=""}function x(){B().onAuthStateChanged(function(d){d||l.replace("/")})}return q(()=>{x()}),(d,t)=>(v(),m("section",re,[f(z,null,{default:_(()=>[R(d.$slots,"default",{},void 0,!0)]),_:3}),t[3]||(t[3]=s("p",{class:"text-3xl font-semibold p-3 dark:text-white"},"Minhas Tarefas",-1)),t[4]||(t[4]=s("div",{class:"text-2xl font-normal pb-5 dark:text-white"},"Adicione uma tarefa abaixo (apertando Enter) e marque as tarefas finalizadas",-1)),s("div",ie,[H(s("input",{placeholder:"Add a new task!",id:"insertField",type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),onKeydown:t[1]||(t[1]=M(i=>p(r.value),["enter"]))},null,544),[[L,r.value]]),s("button",{onClick:t[2]||(t[2]=i=>p(r.value)),class:"bg-blue-500 text-white px-4 py-2 rounded ml-2 hover:bg-blue-600"}," Add ")])]))}},de=A(ue,[["__scopeId","data-v-cf04b516"]]),ce={class:"dark:bg-gray-900 min-h-screen p-4"},fe={class:"flex justify-between items-center w-full px-4"},me={class:"flex items-center gap-2"},ve={key:0,class:"flex justify-center items-center h-32"},ke={key:1,class:"flex justify-center"},ge={class:"task-list"},he=["onClick"],pe={__name:"TaskBody",setup(V){const r=U(),h=B(),l=K(),p=N(l),x=async()=>{try{await ae(h),r.push("/")}catch(a){console.error("Error logging out:",a)}},d=c({}),t=c(!1);c("");const i=c(null),w=G();let u=null;const b=c(!1),k=c(null),$=h.onAuthStateChanged(a=>{a?(i.value=a.uid,E()):(i.value=null,d.value={},u&&(u(),u=null))});function E(){t.value=!0,u&&u();const a=J(C(w,"tasks"),P("userUID"),O(i.value));u=Q(a,e=>{d.value=e.val()||{},t.value=!1})}function j(a){k.value=a,b.value=!0}function I(){if(!k.value)return;const a=C(w,"tasks"),e=le(a,k.value);oe(e).then(o=>{const g=o.val();g&&g.userUID===i.value?ne(e).then(()=>{console.log("Task removed!"),k.value=null}).catch(T=>console.error("Error removing task:",T)):console.error("Access denied: task doesn't belong to user.")}).catch(o=>{console.error("Error fetching task data:",o)})}function S(){k.value=null}return W(()=>{u&&u(),$()}),(a,e)=>(v(),m("div",ce,[f(de,null,{default:_(()=>[s("div",fe,[e[3]||(e[3]=s("div",{class:"py-0 px-3 font-semibold dark:text-white"},"Task Project",-1)),s("div",me,[f(n(y),{icon:"iconamoon:mode-light",color:n(l)?"white":"black",width:"26",height:"26"},null,8,["color"]),f(n(ee),{onClick:e[0]||(e[0]=o=>n(p)()),modelValue:n(l),"onUpdate:modelValue":e[1]||(e[1]=o=>te(l)?l.value=o:null),class:D([n(l)?"bg-gray-900":"bg-gray-700","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:_(()=>[s("span",{class:D([n(l)?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),f(n(y),{icon:"material-symbols:dark-mode-outline",color:n(l)?"white":"black",width:"26",height:"26"},null,8,["color"]),s("button",{onClick:x,class:"ml-4 px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600"}," Sair ")])])]),_:1}),t.value?(v(),m("div",ve,e[4]||(e[4]=[s("div",{class:"spinner"},null,-1)]))):(v(),m("div",ke,[s("ul",ge,[(v(!0),m(X,null,Y(d.value,(o,g)=>(v(),m("li",{key:g,class:"task-item"},[s("span",null,se(o.taskText),1),s("button",{onClick:T=>j(g),class:"delete-btn"},[f(n(y),{icon:"mdi-light:delete"})],8,he)]))),128))])])),f(Z,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=o=>b.value=o),title:"Confirmar Exclusão",message:"Tem certeza que deseja excluir esta tarefa? Esta ação não pode ser desfeita.","confirm-text":"Excluir","cancel-text":"Cancelar","show-cancel":!0,onConfirm:I,onCancel:S},null,8,["modelValue"])]))}},be=A(pe,[["__scopeId","data-v-ec175a32"]]);export{be as default};
