import{_ as A,B as V,r as h,o as L,c as k,a as f,b as s,w as _,d as b,e as j,v as q,f as R,g as y,u as U,h as z,i as m,j as F,k as H,I as M,F as K,l as N,m as O,n as G,p as P,q as Q,s as J,t as W,x as v,y as X,z as Y,A as Z,C as $,D as ee,E as te,G as C,H as se}from"./index-D_BZgazU.js";const ae={components:{BaseHeader:V},setup(){const i=h(""),e=z(),c=U();function t(){e.dispatch("submitData",i.value),i.value=""}function g(){y().signOut(),c.replace("/login")}function u(){y().onAuthStateChanged(function(a){a||c.replace("/")})}return L(()=>{u()}),{taskText:i,submitTask:t,logoutUser:g}}},oe={class:"dark:bg-gray-900"},ne={class:"my-4"};function re(i,e,c,t,g,u){const a=b("base-header");return m(),k("section",oe,[f(a,null,{default:_(()=>[F(i.$slots,"default",{},void 0,!0)]),_:3}),e[3]||(e[3]=s("p",{class:"text-3xl font-semibold p-3 dark:text-white"},"Minhas Tarefas",-1)),e[4]||(e[4]=s("div",{class:"text-2xl font-normal pb-5 dark:text-white"},"Adicione uma tarefa abaixo (apertando Enter) e marque as tarefas finalizadas",-1)),s("div",ne,[j(s("input",{placeholder:"Add a new task!",id:"insertField",type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>t.taskText=r),onKeydown:e[1]||(e[1]=R(r=>t.submitTask(t.taskText),["enter"]))},null,544),[[q,t.taskText]]),s("button",{onClick:e[2]||(e[2]=r=>t.submitTask(t.taskText)),class:"bg-blue-500 text-white px-4 py-2 rounded ml-2 hover:bg-blue-600"}," Add ")])])}const le=A(ae,[["render",re],["__scopeId","data-v-430ecf63"]]),ie={name:"TaskList",components:{MainHeader:le,Icon:M,Switch:H},setup(){const i=U(),e=y(),c=O(),t=G(c),g=async()=>{try{await Z(e),i.push("/")}catch(l){console.error("Error logging out:",l)}},u=h({}),a=h(!1),r=h(""),d=h(null),o=P();let n=null;const w=e.onAuthStateChanged(l=>{l?(d.value=l.uid,I()):(d.value=null,u.value={},n&&(v(o,"tasks").off("value",n),n=null))});function I(){a.value=!0,n&&n();const l=Q(v(o,"tasks"),W("userUID"),J(d.value));n=X(l,x=>{u.value=x.val()||{},a.value=!1})}function S(){!d.value||!r.value.trim()||v(o,"tasks").push({taskText:r.value,userUID:d.value}).then(()=>{r.value=""}).catch(l=>{console.error("Error adding task:",l)})}function B(l){const x=v(o,"tasks"),T=$(x,l);ee(T).then(p=>{const D=p.val();D&&D.userUID===d.value?te(T).then(()=>console.log("Task removed!")).catch(E=>console.error("Error removing task:",E)):console.error("Access denied: task doesn't belong to user.")}).catch(p=>{console.error("Error fetching task data:",p)})}return Y(()=>{n&&n(),w()}),{taskArray:u,isLoading:a,newTaskText:r,addTask:S,deleteTask:B,isDark:c,toggleDark:t,logout:g}}},de={class:"dark:bg-gray-900 min-h-screen p-4"},ce={class:"flex justify-between items-center w-full px-4"},ue={class:"flex items-center gap-2"},ke={key:0,class:"flex justify-center items-center h-32"},fe={key:1,class:"flex justify-center"},me={class:"task-list"},ge=["onClick"];function he(i,e,c,t,g,u){const a=b("Icon"),r=b("Switch"),d=b("main-header");return m(),k("div",de,[f(d,null,{default:_(()=>[s("div",ce,[e[3]||(e[3]=s("div",{class:"py-0 px-3 font-semibold dark:text-white"},"Task Project",-1)),s("div",ue,[f(a,{icon:"iconamoon:mode-light",color:t.isDark?"white":"black",width:"26",height:"26"},null,8,["color"]),f(r,{onClick:e[0]||(e[0]=o=>t.toggleDark()),modelValue:t.isDark,"onUpdate:modelValue":e[1]||(e[1]=o=>t.isDark=o),class:C([t.isDark?"bg-gray-900":"bg-gray-700","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:_(()=>[s("span",{class:C([t.isDark?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),f(a,{icon:"material-symbols:dark-mode-outline",color:t.isDark?"white":"black",width:"26",height:"26"},null,8,["color"]),s("button",{onClick:e[2]||(e[2]=(...o)=>t.logout&&t.logout(...o)),class:"ml-4 px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600"}," Sair ")])])]),_:1}),t.isLoading?(m(),k("div",ke,e[4]||(e[4]=[s("div",{class:"spinner"},null,-1)]))):(m(),k("div",fe,[s("ul",me,[(m(!0),k(K,null,N(t.taskArray,(o,n)=>(m(),k("li",{key:n,class:"task-item"},[s("span",null,se(o.taskText),1),s("button",{onClick:w=>t.deleteTask(n),class:"delete-btn"},[f(a,{icon:"mdi-light:delete"})],8,ge)]))),128))])]))])}const be=A(ie,[["render",he],["__scopeId","data-v-cb9a7c0b"]]);export{be as default};
