import{d as ee,r as k,c as D,i as te,o as n,E as le,t as he,u as G,a as z,q as we,N as Pe,w as oe,b as Se,e as $e,f as Ce,h as Ee,g as M,A as ae,F as Q,j as K,k as ve,l as ne,s as Te,n as pe,m as X,p as Y,v as fe,P as N,x as U,y as Fe,z as ue,B as se,C as A,T as Z,D as L,G as Ie,H as ge,I as De,J as j,K as R,L as h,M as a,O,Q as _e,R as Be,S as Ve,U as Oe,V as Ue,W as me,_ as Ae,X as Me,Y as Le,Z as Ne,$ as je,a0 as Re,a1 as Ge,a2 as ie,a3 as Ke,a4 as He,a5 as qe,a6 as W,a7 as v,a8 as V,a9 as ze,aa as de,ab as Qe,ac as ce,ad as J,ae as We,af as Je,ag as Xe,ah as Ye}from"./index-DZ_z4_Tb.js";var Ze=(m=>(m[m.Open=0]="Open",m[m.Closed=1]="Closed",m))(Ze||{});let be=Symbol("PopoverContext");function re(m){let x=se(be,null);if(x===null){let S=new Error(`<${m} /> is missing a parent <${ye.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,re),S}return x}let et=Symbol("PopoverGroupContext");function xe(){return se(et,null)}let ke=Symbol("PopoverPanelContext");function tt(){return se(ke,null)}let ye=ee({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(m,{slots:x,attrs:S,expose:c}){var E;let C=k(null);c({el:C,$el:C});let o=k(1),e=k(null),w=k(null),T=k(null),p=k(null),y=D(()=>te(C)),$=D(()=>{var l,r;if(!n(e)||!n(p))return!1;for(let q of document.querySelectorAll("body > *"))if(Number(q==null?void 0:q.contains(n(e)))^Number(q==null?void 0:q.contains(n(p))))return!0;let s=le(),u=s.indexOf(n(e)),t=(u+s.length-1)%s.length,d=(u+1)%s.length,I=s[t],H=s[d];return!((l=n(p))!=null&&l.contains(I))&&!((r=n(p))!=null&&r.contains(H))}),b={popoverState:o,buttonId:k(null),panelId:k(null),panel:p,button:e,isPortalled:$,beforePanelSentinel:w,afterPanelSentinel:T,togglePopover(){o.value=G(o.value,{0:1,1:0})},closePopover(){o.value!==1&&(o.value=1)},close(l){b.closePopover();let r=l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(b.button):n(b.button);r==null||r.focus()}};fe(be,b),he(D(()=>G(o.value,{0:z.Open,1:z.Closed})));let F={buttonId:b.buttonId,panelId:b.panelId,close(){b.closePopover()}},P=xe(),_=P==null?void 0:P.registerPopover,[B,f]=we(),g=Pe({mainTreeNodeRef:P==null?void 0:P.mainTreeNodeRef,portals:B,defaultContainers:[e,p]});function i(){var l,r,s,u;return(u=P==null?void 0:P.isFocusWithinPopoverGroup())!=null?u:((l=y.value)==null?void 0:l.activeElement)&&(((r=n(e))==null?void 0:r.contains(y.value.activeElement))||((s=n(p))==null?void 0:s.contains(y.value.activeElement)))}return oe(()=>_==null?void 0:_(F)),Se((E=y.value)==null?void 0:E.defaultView,"focus",l=>{var r,s;l.target!==window&&l.target instanceof HTMLElement&&o.value===0&&(i()||e&&p&&(g.contains(l.target)||(r=n(b.beforePanelSentinel))!=null&&r.contains(l.target)||(s=n(b.afterPanelSentinel))!=null&&s.contains(l.target)||b.closePopover()))},!0),$e(g.resolveContainers,(l,r)=>{var s;b.closePopover(),Ce(r,Ee.Loose)||(l.preventDefault(),(s=n(e))==null||s.focus())},D(()=>o.value===0)),()=>{let l={open:o.value===0,close:b.close};return M(Q,[M(f,{},()=>ae({theirProps:{...m,...S},ourProps:{ref:C},slot:l,slots:x,attrs:S,name:"Popover"})),M(g.MainTreeNode)])}}}),lt=ee({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(m,{attrs:x,slots:S,expose:c}){var E;let C=(E=m.id)!=null?E:`headlessui-popover-button-${K()}`,o=re("PopoverButton"),e=D(()=>te(o.button));c({el:o.button,$el:o.button}),ve(()=>{o.buttonId.value=C}),ne(()=>{o.buttonId.value=null});let w=xe(),T=w==null?void 0:w.closeOthers,p=tt(),y=D(()=>p===null?!1:p.value===o.panelId.value),$=k(null),b=`headlessui-focus-sentinel-${K()}`;y.value||oe(()=>{o.button.value=n($)});let F=Te(D(()=>({as:m.as,type:x.type})),$);function P(l){var r,s,u,t,d;if(y.value){if(o.popoverState.value===1)return;switch(l.key){case L.Space:case L.Enter:l.preventDefault(),(s=(r=l.target).click)==null||s.call(r),o.closePopover(),(u=n(o.button))==null||u.focus();break}}else switch(l.key){case L.Space:case L.Enter:l.preventDefault(),l.stopPropagation(),o.popoverState.value===1&&(T==null||T(o.buttonId.value)),o.togglePopover();break;case L.Escape:if(o.popoverState.value!==0)return T==null?void 0:T(o.buttonId.value);if(!n(o.button)||(t=e.value)!=null&&t.activeElement&&!((d=n(o.button))!=null&&d.contains(e.value.activeElement)))return;l.preventDefault(),l.stopPropagation(),o.closePopover();break}}function _(l){y.value||l.key===L.Space&&l.preventDefault()}function B(l){var r,s;m.disabled||(y.value?(o.closePopover(),(r=n(o.button))==null||r.focus()):(l.preventDefault(),l.stopPropagation(),o.popoverState.value===1&&(T==null||T(o.buttonId.value)),o.togglePopover(),(s=n(o.button))==null||s.focus()))}function f(l){l.preventDefault(),l.stopPropagation()}let g=pe();function i(){let l=n(o.panel);if(!l)return;function r(){G(g.value,{[A.Forwards]:()=>N(l,U.First),[A.Backwards]:()=>N(l,U.Last)})===Z.Error&&N(le().filter(s=>s.dataset.headlessuiFocusGuard!=="true"),G(g.value,{[A.Forwards]:U.Next,[A.Backwards]:U.Previous}),{relativeTo:n(o.button)})}r()}return()=>{let l=o.popoverState.value===0,r={open:l},{...s}=m,u=y.value?{ref:$,type:F.value,onKeydown:P,onClick:B}:{ref:$,id:C,type:F.value,"aria-expanded":o.popoverState.value===0,"aria-controls":n(o.panel)?o.panelId.value:void 0,disabled:m.disabled?!0:void 0,onKeydown:P,onKeyup:_,onClick:B,onMousedown:f};return M(Q,[ae({ourProps:u,theirProps:{...x,...s},slot:r,attrs:x,slots:S,name:"PopoverButton"}),l&&!y.value&&o.isPortalled.value&&M(X,{id:b,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:i})])}}}),ot=ee({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(m,{attrs:x,slots:S,expose:c}){var E;let C=(E=m.id)!=null?E:`headlessui-popover-panel-${K()}`,{focus:o}=m,e=re("PopoverPanel"),w=D(()=>te(e.panel)),T=`headlessui-focus-sentinel-before-${K()}`,p=`headlessui-focus-sentinel-after-${K()}`;c({el:e.panel,$el:e.panel}),ve(()=>{e.panelId.value=C}),ne(()=>{e.panelId.value=null}),fe(ke,e.panelId),oe(()=>{var f,g;if(!o||e.popoverState.value!==0||!e.panel)return;let i=(f=w.value)==null?void 0:f.activeElement;(g=n(e.panel))!=null&&g.contains(i)||N(n(e.panel),U.First)});let y=Fe(),$=D(()=>y!==null?(y.value&z.Open)===z.Open:e.popoverState.value===0);function b(f){var g,i;switch(f.key){case L.Escape:if(e.popoverState.value!==0||!n(e.panel)||w.value&&!((g=n(e.panel))!=null&&g.contains(w.value.activeElement)))return;f.preventDefault(),f.stopPropagation(),e.closePopover(),(i=n(e.button))==null||i.focus();break}}function F(f){var g,i,l,r,s;let u=f.relatedTarget;u&&n(e.panel)&&((g=n(e.panel))!=null&&g.contains(u)||(e.closePopover(),((l=(i=n(e.beforePanelSentinel))==null?void 0:i.contains)!=null&&l.call(i,u)||(s=(r=n(e.afterPanelSentinel))==null?void 0:r.contains)!=null&&s.call(r,u))&&u.focus({preventScroll:!0})))}let P=pe();function _(){let f=n(e.panel);if(!f)return;function g(){G(P.value,{[A.Forwards]:()=>{var i;N(f,U.First)===Z.Error&&((i=n(e.afterPanelSentinel))==null||i.focus())},[A.Backwards]:()=>{var i;(i=n(e.button))==null||i.focus({preventScroll:!0})}})}g()}function B(){let f=n(e.panel);if(!f)return;function g(){G(P.value,{[A.Forwards]:()=>{let i=n(e.button),l=n(e.panel);if(!i)return;let r=le(),s=r.indexOf(i),u=r.slice(0,s+1),t=[...r.slice(s+1),...u];for(let d of t.slice())if(d.dataset.headlessuiFocusGuard==="true"||l!=null&&l.contains(d)){let I=t.indexOf(d);I!==-1&&t.splice(I,1)}N(t,U.First,{sorted:!1})},[A.Backwards]:()=>{var i;N(f,U.Previous)===Z.Error&&((i=n(e.button))==null||i.focus())}})}g()}return()=>{let f={open:e.popoverState.value===0,close:e.close},{focus:g,...i}=m,l={ref:e.panel,id:C,onKeydown:b,onFocusout:o&&e.popoverState.value===0?F:void 0,tabIndex:-1};return ae({ourProps:l,theirProps:{...x,...i},attrs:x,slot:f,slots:{...S,default:(...r)=>{var s;return[M(Q,[$.value&&e.isPortalled.value&&M(X,{id:T,ref:e.beforePanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}),(s=S.default)==null?void 0:s.call(S,...r),$.value&&e.isPortalled.value&&M(X,{id:p,ref:e.afterPanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B})])]}},features:ue.RenderStrategy|ue.Static,visible:$.value,name:"PopoverPanel"})}}});const at={class:"max-w-4xl mx-auto px-4"},nt={class:"flex justify-center mb-8"},st={class:"flex gap-2 w-full max-w-md"},rt={__name:"BodyHeader",setup(m){const x=k(""),S=Ie(),c=ge();function E(){S.dispatch("submitData",x.value),x.value=""}function C(){me().onAuthStateChanged(function(o){o||c.replace("/")})}return De(()=>{C()}),(o,e)=>(R(),j("section",null,[h(Be,null,{default:O(()=>[_e(o.$slots,"default")]),_:3}),a("div",at,[e[3]||(e[3]=a("p",{class:"text-3xl font-bold py-6 text-indigo-800 dark:text-indigo-200 text-center"},"Minhas Tarefas",-1)),e[4]||(e[4]=a("div",{class:"text-lg font-normal pb-6 text-indigo-600 dark:text-indigo-300 text-center"}," Adicione uma tarefa abaixo (apertando Enter) e organize suas atividades ",-1)),a("div",nt,[a("div",st,[Ve(a("input",{placeholder:"Adicionar nova tarefa...",id:"insertField",type:"text","onUpdate:modelValue":e[0]||(e[0]=w=>x.value=w),onKeydown:e[1]||(e[1]=Ue(w=>E(x.value),["enter"])),class:"flex-1 px-4 py-2 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 bg-white/80 backdrop-blur-sm"},null,544),[[Oe,x.value]]),a("button",{onClick:e[2]||(e[2]=w=>E(x.value)),class:"bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition-colors font-medium shadow-md hover:shadow-lg"}," Adicionar ")])])])]))}},ut={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-100 dark:from-gray-900 dark:via-slate-900 dark:to-indigo-900 m-0 p-0 flex flex-col"},it={class:"flex justify-between items-center w-full"},dt={class:"flex items-center gap-2"},ct={class:"px-1 py-1"},vt={class:"px-3 py-2 border-b border-indigo-200 dark:border-slate-600"},pt={class:"text-sm font-medium text-indigo-900 dark:text-indigo-200"},ft={class:"border-t border-indigo-200 dark:border-slate-600 mt-1 pt-1"},gt={class:"flex-1 px-4 pb-4"},mt={key:0,class:"flex justify-center items-center h-32"},bt={key:1,class:"flex justify-center"},xt={class:"task-list"},kt=["onClick"],yt={class:"space-y-4"},ht=["value"],wt={class:"space-y-4"},Pt={class:"flex flex-col gap-2"},St={class:"flex items-center"},$t=["checked"],Ct={class:"flex items-center"},Et=["checked"],Tt={__name:"TaskBody",setup(m){const x=ge(),S=me(),c=Me(),E=Le(c),C=async()=>{try{await We(S),x.push("/")}catch(u){console.error("Error logging out:",u)}},o=k({}),e=k(!1);k("");const w=k(null),T=Ne();let p=null;const y=k(!1),$=k(null),b=k(!1),F=k(!1),P=k(""),_=S.onAuthStateChanged(u=>{u?(w.value=u.uid,P.value=u.email,B()):(w.value=null,P.value="",o.value={},p&&(p(),p=null))});function B(){e.value=!0,p&&p();const u=je(ie(T,"tasks"),Ge("userUID"),Re(w.value));p=Ke(u,t=>{o.value=t.val()||{},e.value=!1})}function f(u){$.value=u,y.value=!0}function g(){if(!$.value)return;const u=ie(T,"tasks"),t=Je(u,$.value);Xe(t).then(d=>{const I=d.val();I&&I.userUID===w.value?Ye(t).then(()=>{console.log("Task removed!"),$.value=null}).catch(H=>console.error("Error removing task:",H)):console.error("Access denied: task doesn't belong to user.")}).catch(d=>{console.error("Error fetching task data:",d)})}function i(){$.value=null}function l(){b.value=!0}function r(){F.value=!0}function s(){F.value=!1}return ne(()=>{p&&p(),_()}),(u,t)=>(R(),j("div",ut,[h(rt,null,{default:O(()=>[a("div",it,[t[13]||(t[13]=a("div",{class:"font-bold text-indigo-800 dark:text-indigo-200"},"Task Project",-1)),a("div",dt,[h(v(V),{icon:"iconamoon:mode-light",color:v(c)?"#fbbf24":"#f59e0b",width:"26",height:"26"},null,8,["color"]),h(v(ze),{onClick:t[0]||(t[0]=d=>v(E)()),modelValue:v(c),"onUpdate:modelValue":t[1]||(t[1]=d=>Qe(c)?c.value=d:null),class:de([v(c)?"bg-indigo-600":"bg-indigo-400","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:O(()=>[a("span",{class:de([v(c)?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm"])},null,2)]),_:1},8,["modelValue","class"]),h(v(V),{icon:"material-symbols:dark-mode-outline",color:v(c)?"#c7d2fe":"#6366f1",width:"26",height:"26"},null,8,["color"]),h(v(ye),{class:"relative ml-4"},{default:O(()=>[h(v(lt),{class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 dark:bg-slate-700 dark:hover:bg-slate-600 transition-colors border border-indigo-200 dark:border-slate-600"},{default:O(()=>[h(v(V),{icon:"mdi:account-circle",color:v(c)?"#c7d2fe":"#4f46e5",width:"24",height:"24"},null,8,["color"]),h(v(V),{icon:"mdi:chevron-down",color:v(c)?"#c7d2fe":"#4f46e5",width:"16",height:"16"},null,8,["color"])]),_:1}),h(v(ot),{class:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none border border-indigo-100 dark:border-slate-700"},{default:O(()=>[a("div",ct,[a("div",vt,[a("p",pt,ce(P.value||"Usuário"),1),t[9]||(t[9]=a("p",{class:"text-xs text-indigo-600 dark:text-indigo-400"}," Logado ",-1))]),a("button",{onClick:l,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-slate-700"},[h(v(V),{icon:"mdi:account-edit",class:"mr-3 h-4 w-4",color:v(c)?"#a5b4fc":"#4338ca"},null,8,["color"]),t[10]||(t[10]=J(" Editar Perfil "))]),a("button",{onClick:r,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-slate-700"},[h(v(V),{icon:"mdi:cog",class:"mr-3 h-4 w-4",color:v(c)?"#a5b4fc":"#4338ca"},null,8,["color"]),t[11]||(t[11]=J(" Configurações "))]),a("div",ft,[a("button",{onClick:C,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},[h(v(V),{icon:"mdi:logout",class:"mr-3 h-4 w-4",color:"#dc2626"}),t[12]||(t[12]=J(" Sair "))])])])]),_:1})]),_:1})])])]),_:1}),a("div",gt,[e.value?(R(),j("div",mt,t[14]||(t[14]=[a("div",{class:"spinner"},null,-1)]))):(R(),j("div",bt,[a("ul",xt,[(R(!0),j(Q,null,He(o.value,(d,I)=>(R(),j("li",{key:I,class:"task-item"},[a("span",null,ce(d.taskText),1),a("button",{onClick:H=>f(I),class:"delete-btn"},[h(v(V),{icon:"mdi-light:delete"})],8,kt)]))),128))])]))]),h(qe),h(W,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=d=>y.value=d),title:"Confirmar Exclusão",message:"Tem certeza que deseja excluir esta tarefa? Esta ação não pode ser desfeita.","confirm-text":"Excluir","cancel-text":"Cancelar","show-cancel":!0,onConfirm:g,onCancel:i},null,8,["modelValue"]),h(W,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=d=>b.value=d),title:"Perfil do Usuário","confirm-text":"Fechar","show-cancel":!1,onConfirm:t[4]||(t[4]=d=>b.value=!1)},{content:O(()=>[a("div",yt,[a("div",null,[t[15]||(t[15]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email ",-1)),a("input",{type:"email",value:P.value,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,8,ht),t[16]||(t[16]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," O email não pode ser alterado ",-1))]),t[17]||(t[17]=a("div",{class:"text-center pt-4"},[a("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Para alterar outras informações do perfil, entre em contato com o suporte. ")],-1))])]),_:1},8,["modelValue"]),h(W,{modelValue:F.value,"onUpdate:modelValue":t[7]||(t[7]=d=>F.value=d),title:"Configurações","confirm-text":"Salvar","cancel-text":"Cancelar","show-cancel":!0,onConfirm:s,onCancel:t[8]||(t[8]=d=>F.value=!1)},{content:O(()=>[a("div",wt,[a("div",null,[t[20]||(t[20]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tema ",-1)),a("div",Pt,[a("label",St,[a("input",{type:"radio",name:"theme",value:"light",class:"mr-2",checked:!v(c),onChange:t[5]||(t[5]=d=>c.value=!1)},null,40,$t),t[18]||(t[18]=a("span",{class:"dark:text-white"},"Claro",-1))]),a("label",Ct,[a("input",{type:"radio",name:"theme",value:"dark",class:"mr-2",checked:v(c),onChange:t[6]||(t[6]=d=>c.value=!0)},null,40,Et),t[19]||(t[19]=a("span",{class:"dark:text-white"},"Escuro",-1))])]),t[21]||(t[21]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," O tema será aplicado imediatamente ",-1))]),t[22]||(t[22]=a("div",null,[a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Notificações "),a("div",{class:"flex items-center"},[a("input",{type:"checkbox",id:"notifications",class:"mr-2"}),a("label",{for:"notifications",class:"dark:text-white"}," Receber notificações por email ")])],-1))])]),_:1},8,["modelValue"])]))}},It=Ae(Tt,[["__scopeId","data-v-dcf302e5"]]);export{It as default};
