import{_ as C,B as R,r as g,u as q,a as S,o as F,b as v,c as k,d as _,e as h,w as x,f as K,g as o,h as M,v as $,i as z,j as y,p as A,k as U,I as N,l as O,m as G,n as J,q as P,s as Q,t as W,x as X,y as m,z as Y,A as Z,F as ee,C as te,D as se,E as oe,G as ae,H as ne,J as I,K as le}from"./index-5acc11a5.js";const re={components:{BaseHeader:R},setup(){const s=g(""),t=q(),d=S();function e(){t.dispatch("submitData",s.value),s.value=""}function f(){y().signOut(),d.replace("/login")}function u(){y().onAuthStateChanged(function(a){a||d.replace("/")})}return F(()=>{u()}),{taskText:s,submitTask:e,logoutUser:f}}},B=s=>(A("data-v-3162c0ab"),s=s(),U(),s),ie={class:"dark:bg-gray-900"},ce=B(()=>o("p",{class:"text-3xl font-semibold p-3 dark:text-white"},"My Tasks",-1)),de=B(()=>o("div",{class:"text-2xl font-normal pb-5 dark:text-white"},"Add a task below (with Enter) and click over the finished tasks",-1)),ue={class:"my-4"};function ke(s,t,d,e,f,u){const a=v("base-header");return k(),_("section",ie,[h(a,null,{default:x(()=>[K(s.$slots,"default",{},void 0,!0)]),_:3}),ce,de,o("div",ue,[M(o("input",{placeholder:"Add a new task!",id:"insertField",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>e.taskText=r),onKeydown:t[1]||(t[1]=z(r=>e.submitTask(e.taskText),["enter"]))},null,544),[[$,e.taskText]]),o("button",{onClick:t[2]||(t[2]=r=>e.submitTask(e.taskText)),class:"bg-blue-500 text-white px-4 py-2 rounded ml-2 hover:bg-blue-600"}," Add ")])])}const _e=C(re,[["render",ke],["__scopeId","data-v-3162c0ab"]]);const he={name:"TaskList",components:{MainHeader:_e,Icon:N,Switch:O},setup(){const s=S(),t=y(),d=G(),e=J(d),f=async()=>{try{await se(t),s.push("/")}catch(i){console.error("Error logging out:",i)}},u=g({}),a=g(!1),r=g(""),c=g(null),n=P();let l=null;const w=t.onAuthStateChanged(i=>{i?(c.value=i.uid,L()):(c.value=null,u.value={},l&&(m(n,"tasks").off("value",l),l=null))});function L(){a.value=!0,l&&l();const i=Q(m(n,"tasks"),X("userUID"),W(c.value));l=Y(i,p=>{u.value=p.val()||{},a.value=!1})}function V(){!c.value||!r.value.trim()||m(n,"tasks").push({taskText:r.value,userUID:c.value}).then(()=>{r.value=""}).catch(i=>{console.error("Error adding task:",i)})}function j(i){const p=m(n,"tasks"),T=oe(p,i);ae(T).then(b=>{const D=b.val();D&&D.userUID===c.value?ne(T).then(()=>console.log("Task removed!")).catch(H=>console.error("Error removing task:",H)):console.error("Access denied: task doesn't belong to user.")}).catch(b=>{console.error("Error fetching task data:",b)})}return Z(()=>{l&&l(),w()}),{taskArray:u,isLoading:a,newTaskText:r,addTask:V,deleteTask:j,isDark:d,toggleDark:e,logout:f}}},E=s=>(A("data-v-0f87078a"),s=s(),U(),s),fe={class:"dark:bg-gray-900 min-h-screen p-4"},ge={class:"flex justify-between items-center w-full px-4"},me=E(()=>o("div",{class:"py-0 px-3 font-semibold dark:text-white"},"Task Project",-1)),ve={class:"flex items-center gap-2"},pe={key:0,class:"flex justify-center items-center h-32"},be=E(()=>o("div",{class:"spinner"},null,-1)),xe=[be],ye={key:1,class:"flex justify-center"},we={class:"task-list"},Te=["onClick"];function De(s,t,d,e,f,u){const a=v("Icon"),r=v("Switch"),c=v("main-header");return k(),_("div",fe,[h(c,null,{default:x(()=>[o("div",ge,[me,o("div",ve,[h(a,{icon:"iconamoon:mode-light",color:e.isDark?"white":"black",width:"26",height:"26"},null,8,["color"]),h(r,{onClick:t[0]||(t[0]=n=>e.toggleDark()),modelValue:e.isDark,"onUpdate:modelValue":t[1]||(t[1]=n=>e.isDark=n),class:I([e.isDark?"bg-gray-900":"bg-gray-700","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:x(()=>[o("span",{class:I([e.isDark?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),h(a,{icon:"material-symbols:dark-mode-outline",color:e.isDark?"white":"black",width:"26",height:"26"},null,8,["color"]),o("button",{onClick:t[2]||(t[2]=(...n)=>e.logout&&e.logout(...n)),class:"ml-4 px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600"}," Logout ")])])]),_:1}),e.isLoading?(k(),_("div",pe,xe)):(k(),_("div",ye,[o("ul",we,[(k(!0),_(ee,null,te(e.taskArray,(n,l)=>(k(),_("li",{key:l,class:"task-item"},[o("span",null,le(n.taskText),1),o("button",{onClick:w=>e.deleteTask(l),class:"delete-btn"},[h(a,{icon:"mdi-light:delete"})],8,Te)]))),128))])]))])}const Ce=C(he,[["render",De],["__scopeId","data-v-0f87078a"]]);export{Ce as default};
