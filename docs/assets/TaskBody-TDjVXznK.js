import{d as ee,r as y,c as D,i as te,o as n,E as le,t as he,u as G,a as z,q as we,N as Pe,w as ae,b as Se,e as $e,f as Ce,h as Ee,g as M,A as oe,F as Q,j as K,k as ve,l as ne,s as Te,n as pe,m as X,p as Y,v as fe,P as N,x as U,y as Fe,z as ue,B as re,C as A,T as Z,D as L,G as Ie,H as ge,I as De,J as j,K as R,L as P,M as o,O,Q as _e,R as Be,S as Ve,U as Oe,V as Ue,W as me,_ as Ae,X as Me,Y as Le,Z as Ne,$ as je,a0 as Re,a1 as Ge,a2 as ie,a3 as Ke,a4 as He,a5 as W,a6 as v,a7 as V,a8 as qe,a9 as de,aa as ze,ab as ce,ac as J,ad as Qe,ae as We,af as Je,ag as Xe}from"./index-ExeCIBVB.js";var Ye=(m=>(m[m.Open=0]="Open",m[m.Closed=1]="Closed",m))(Ye||{});let be=Symbol("PopoverContext");function se(m){let x=re(be,null);if(x===null){let S=new Error(`<${m} /> is missing a parent <${ke.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,se),S}return x}let Ze=Symbol("PopoverGroupContext");function xe(){return re(Ze,null)}let ye=Symbol("PopoverPanelContext");function et(){return re(ye,null)}let ke=ee({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(m,{slots:x,attrs:S,expose:c}){var E;let C=y(null);c({el:C,$el:C});let a=y(1),e=y(null),h=y(null),T=y(null),p=y(null),k=D(()=>te(C)),$=D(()=>{var l,s;if(!n(e)||!n(p))return!1;for(let q of document.querySelectorAll("body > *"))if(Number(q==null?void 0:q.contains(n(e)))^Number(q==null?void 0:q.contains(n(p))))return!0;let r=le(),u=r.indexOf(n(e)),t=(u+r.length-1)%r.length,d=(u+1)%r.length,I=r[t],H=r[d];return!((l=n(p))!=null&&l.contains(I))&&!((s=n(p))!=null&&s.contains(H))}),b={popoverState:a,buttonId:y(null),panelId:y(null),panel:p,button:e,isPortalled:$,beforePanelSentinel:h,afterPanelSentinel:T,togglePopover(){a.value=G(a.value,{0:1,1:0})},closePopover(){a.value!==1&&(a.value=1)},close(l){b.closePopover();let s=l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(b.button):n(b.button);s==null||s.focus()}};fe(be,b),he(D(()=>G(a.value,{0:z.Open,1:z.Closed})));let F={buttonId:b.buttonId,panelId:b.panelId,close(){b.closePopover()}},w=xe(),_=w==null?void 0:w.registerPopover,[B,f]=we(),g=Pe({mainTreeNodeRef:w==null?void 0:w.mainTreeNodeRef,portals:B,defaultContainers:[e,p]});function i(){var l,s,r,u;return(u=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?u:((l=k.value)==null?void 0:l.activeElement)&&(((s=n(e))==null?void 0:s.contains(k.value.activeElement))||((r=n(p))==null?void 0:r.contains(k.value.activeElement)))}return ae(()=>_==null?void 0:_(F)),Se((E=k.value)==null?void 0:E.defaultView,"focus",l=>{var s,r;l.target!==window&&l.target instanceof HTMLElement&&a.value===0&&(i()||e&&p&&(g.contains(l.target)||(s=n(b.beforePanelSentinel))!=null&&s.contains(l.target)||(r=n(b.afterPanelSentinel))!=null&&r.contains(l.target)||b.closePopover()))},!0),$e(g.resolveContainers,(l,s)=>{var r;b.closePopover(),Ce(s,Ee.Loose)||(l.preventDefault(),(r=n(e))==null||r.focus())},D(()=>a.value===0)),()=>{let l={open:a.value===0,close:b.close};return M(Q,[M(f,{},()=>oe({theirProps:{...m,...S},ourProps:{ref:C},slot:l,slots:x,attrs:S,name:"Popover"})),M(g.MainTreeNode)])}}}),tt=ee({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(m,{attrs:x,slots:S,expose:c}){var E;let C=(E=m.id)!=null?E:`headlessui-popover-button-${K()}`,a=se("PopoverButton"),e=D(()=>te(a.button));c({el:a.button,$el:a.button}),ve(()=>{a.buttonId.value=C}),ne(()=>{a.buttonId.value=null});let h=xe(),T=h==null?void 0:h.closeOthers,p=et(),k=D(()=>p===null?!1:p.value===a.panelId.value),$=y(null),b=`headlessui-focus-sentinel-${K()}`;k.value||ae(()=>{a.button.value=n($)});let F=Te(D(()=>({as:m.as,type:x.type})),$);function w(l){var s,r,u,t,d;if(k.value){if(a.popoverState.value===1)return;switch(l.key){case L.Space:case L.Enter:l.preventDefault(),(r=(s=l.target).click)==null||r.call(s),a.closePopover(),(u=n(a.button))==null||u.focus();break}}else switch(l.key){case L.Space:case L.Enter:l.preventDefault(),l.stopPropagation(),a.popoverState.value===1&&(T==null||T(a.buttonId.value)),a.togglePopover();break;case L.Escape:if(a.popoverState.value!==0)return T==null?void 0:T(a.buttonId.value);if(!n(a.button)||(t=e.value)!=null&&t.activeElement&&!((d=n(a.button))!=null&&d.contains(e.value.activeElement)))return;l.preventDefault(),l.stopPropagation(),a.closePopover();break}}function _(l){k.value||l.key===L.Space&&l.preventDefault()}function B(l){var s,r;m.disabled||(k.value?(a.closePopover(),(s=n(a.button))==null||s.focus()):(l.preventDefault(),l.stopPropagation(),a.popoverState.value===1&&(T==null||T(a.buttonId.value)),a.togglePopover(),(r=n(a.button))==null||r.focus()))}function f(l){l.preventDefault(),l.stopPropagation()}let g=pe();function i(){let l=n(a.panel);if(!l)return;function s(){G(g.value,{[A.Forwards]:()=>N(l,U.First),[A.Backwards]:()=>N(l,U.Last)})===Z.Error&&N(le().filter(r=>r.dataset.headlessuiFocusGuard!=="true"),G(g.value,{[A.Forwards]:U.Next,[A.Backwards]:U.Previous}),{relativeTo:n(a.button)})}s()}return()=>{let l=a.popoverState.value===0,s={open:l},{...r}=m,u=k.value?{ref:$,type:F.value,onKeydown:w,onClick:B}:{ref:$,id:C,type:F.value,"aria-expanded":a.popoverState.value===0,"aria-controls":n(a.panel)?a.panelId.value:void 0,disabled:m.disabled?!0:void 0,onKeydown:w,onKeyup:_,onClick:B,onMousedown:f};return M(Q,[oe({ourProps:u,theirProps:{...x,...r},slot:s,attrs:x,slots:S,name:"PopoverButton"}),l&&!k.value&&a.isPortalled.value&&M(X,{id:b,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:i})])}}}),lt=ee({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(m,{attrs:x,slots:S,expose:c}){var E;let C=(E=m.id)!=null?E:`headlessui-popover-panel-${K()}`,{focus:a}=m,e=se("PopoverPanel"),h=D(()=>te(e.panel)),T=`headlessui-focus-sentinel-before-${K()}`,p=`headlessui-focus-sentinel-after-${K()}`;c({el:e.panel,$el:e.panel}),ve(()=>{e.panelId.value=C}),ne(()=>{e.panelId.value=null}),fe(ye,e.panelId),ae(()=>{var f,g;if(!a||e.popoverState.value!==0||!e.panel)return;let i=(f=h.value)==null?void 0:f.activeElement;(g=n(e.panel))!=null&&g.contains(i)||N(n(e.panel),U.First)});let k=Fe(),$=D(()=>k!==null?(k.value&z.Open)===z.Open:e.popoverState.value===0);function b(f){var g,i;switch(f.key){case L.Escape:if(e.popoverState.value!==0||!n(e.panel)||h.value&&!((g=n(e.panel))!=null&&g.contains(h.value.activeElement)))return;f.preventDefault(),f.stopPropagation(),e.closePopover(),(i=n(e.button))==null||i.focus();break}}function F(f){var g,i,l,s,r;let u=f.relatedTarget;u&&n(e.panel)&&((g=n(e.panel))!=null&&g.contains(u)||(e.closePopover(),((l=(i=n(e.beforePanelSentinel))==null?void 0:i.contains)!=null&&l.call(i,u)||(r=(s=n(e.afterPanelSentinel))==null?void 0:s.contains)!=null&&r.call(s,u))&&u.focus({preventScroll:!0})))}let w=pe();function _(){let f=n(e.panel);if(!f)return;function g(){G(w.value,{[A.Forwards]:()=>{var i;N(f,U.First)===Z.Error&&((i=n(e.afterPanelSentinel))==null||i.focus())},[A.Backwards]:()=>{var i;(i=n(e.button))==null||i.focus({preventScroll:!0})}})}g()}function B(){let f=n(e.panel);if(!f)return;function g(){G(w.value,{[A.Forwards]:()=>{let i=n(e.button),l=n(e.panel);if(!i)return;let s=le(),r=s.indexOf(i),u=s.slice(0,r+1),t=[...s.slice(r+1),...u];for(let d of t.slice())if(d.dataset.headlessuiFocusGuard==="true"||l!=null&&l.contains(d)){let I=t.indexOf(d);I!==-1&&t.splice(I,1)}N(t,U.First,{sorted:!1})},[A.Backwards]:()=>{var i;N(f,U.Previous)===Z.Error&&((i=n(e.button))==null||i.focus())}})}g()}return()=>{let f={open:e.popoverState.value===0,close:e.close},{focus:g,...i}=m,l={ref:e.panel,id:C,onKeydown:b,onFocusout:a&&e.popoverState.value===0?F:void 0,tabIndex:-1};return oe({ourProps:l,theirProps:{...x,...i},attrs:x,slot:f,slots:{...S,default:(...s)=>{var r;return[M(Q,[$.value&&e.isPortalled.value&&M(X,{id:T,ref:e.beforePanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}),(r=S.default)==null?void 0:r.call(S,...s),$.value&&e.isPortalled.value&&M(X,{id:p,ref:e.afterPanelSentinel,features:Y.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B})])]}},features:ue.RenderStrategy|ue.Static,visible:$.value,name:"PopoverPanel"})}}});const at={class:"dark:bg-gray-900"},ot={class:"max-w-4xl mx-auto px-4"},nt={class:"flex justify-center mb-8"},rt={class:"flex gap-2 w-full max-w-md"},st={__name:"BodyHeader",setup(m){const x=y(""),S=Ie(),c=ge();function E(){S.dispatch("submitData",x.value),x.value=""}function C(){me().onAuthStateChanged(function(a){a||c.replace("/")})}return De(()=>{C()}),(a,e)=>(R(),j("section",at,[P(Be,null,{default:O(()=>[_e(a.$slots,"default")]),_:3}),o("div",ot,[e[3]||(e[3]=o("p",{class:"text-3xl font-semibold py-6 dark:text-white text-center"},"Minhas Tarefas",-1)),e[4]||(e[4]=o("div",{class:"text-lg font-normal pb-6 dark:text-white text-center"}," Adicione uma tarefa abaixo (apertando Enter) e organize suas atividades ",-1)),o("div",nt,[o("div",rt,[Ve(o("input",{placeholder:"Adicionar nova tarefa...",id:"insertField",type:"text","onUpdate:modelValue":e[0]||(e[0]=h=>x.value=h),onKeydown:e[1]||(e[1]=Ue(h=>E(x.value),["enter"])),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"},null,544),[[Oe,x.value]]),o("button",{onClick:e[2]||(e[2]=h=>E(x.value)),class:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium"}," Adicionar ")])])])]))}},ut={class:"dark:bg-gray-900 min-h-screen m-0 p-0"},it={class:"flex justify-between items-center w-full"},dt={class:"flex items-center gap-2"},ct={class:"px-1 py-1"},vt={class:"px-3 py-2 border-b border-gray-200 dark:border-gray-600"},pt={class:"text-sm font-medium text-gray-900 dark:text-white"},ft={class:"border-t border-gray-200 dark:border-gray-600 mt-1 pt-1"},gt={class:"px-4 pb-4"},mt={key:0,class:"flex justify-center items-center h-32"},bt={key:1,class:"flex justify-center"},xt={class:"task-list"},yt=["onClick"],kt={class:"space-y-4"},ht=["value"],wt={class:"space-y-4"},Pt={class:"flex flex-col gap-2"},St={class:"flex items-center"},$t=["checked"],Ct={class:"flex items-center"},Et=["checked"],Tt={__name:"TaskBody",setup(m){const x=ge(),S=me(),c=Me(),E=Le(c),C=async()=>{try{await Qe(S),x.push("/")}catch(u){console.error("Error logging out:",u)}},a=y({}),e=y(!1);y("");const h=y(null),T=Ne();let p=null;const k=y(!1),$=y(null),b=y(!1),F=y(!1),w=y(""),_=S.onAuthStateChanged(u=>{u?(h.value=u.uid,w.value=u.email,B()):(h.value=null,w.value="",a.value={},p&&(p(),p=null))});function B(){e.value=!0,p&&p();const u=je(ie(T,"tasks"),Ge("userUID"),Re(h.value));p=Ke(u,t=>{a.value=t.val()||{},e.value=!1})}function f(u){$.value=u,k.value=!0}function g(){if(!$.value)return;const u=ie(T,"tasks"),t=We(u,$.value);Je(t).then(d=>{const I=d.val();I&&I.userUID===h.value?Xe(t).then(()=>{console.log("Task removed!"),$.value=null}).catch(H=>console.error("Error removing task:",H)):console.error("Access denied: task doesn't belong to user.")}).catch(d=>{console.error("Error fetching task data:",d)})}function i(){$.value=null}function l(){b.value=!0}function s(){F.value=!0}function r(){F.value=!1}return ne(()=>{p&&p(),_()}),(u,t)=>(R(),j("div",ut,[P(st,null,{default:O(()=>[o("div",it,[t[13]||(t[13]=o("div",{class:"font-semibold dark:text-white"},"Task Project",-1)),o("div",dt,[P(v(V),{icon:"iconamoon:mode-light",color:v(c)?"white":"black",width:"26",height:"26"},null,8,["color"]),P(v(qe),{onClick:t[0]||(t[0]=d=>v(E)()),modelValue:v(c),"onUpdate:modelValue":t[1]||(t[1]=d=>ze(c)?c.value=d:null),class:de([v(c)?"bg-gray-900":"bg-gray-700","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:O(()=>[o("span",{class:de([v(c)?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),P(v(V),{icon:"material-symbols:dark-mode-outline",color:v(c)?"white":"black",width:"26",height:"26"},null,8,["color"]),P(v(ke),{class:"relative ml-4"},{default:O(()=>[P(v(tt),{class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors"},{default:O(()=>[P(v(V),{icon:"mdi:account-circle",color:v(c)?"white":"black",width:"24",height:"24"},null,8,["color"]),P(v(V),{icon:"mdi:chevron-down",color:v(c)?"white":"black",width:"16",height:"16"},null,8,["color"])]),_:1}),P(v(lt),{class:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:O(()=>[o("div",ct,[o("div",vt,[o("p",pt,ce(w.value||"Usuário"),1),t[9]||(t[9]=o("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Logado ",-1))]),o("button",{onClick:l,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"},[P(v(V),{icon:"mdi:account-edit",class:"mr-3 h-4 w-4",color:v(c)?"#d1d5db":"#374151"},null,8,["color"]),t[10]||(t[10]=J(" Editar Perfil "))]),o("button",{onClick:s,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"},[P(v(V),{icon:"mdi:cog",class:"mr-3 h-4 w-4",color:v(c)?"#d1d5db":"#374151"},null,8,["color"]),t[11]||(t[11]=J(" Configurações "))]),o("div",ft,[o("button",{onClick:C,class:"group flex w-full items-center rounded-md px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"},[P(v(V),{icon:"mdi:logout",class:"mr-3 h-4 w-4",color:"#dc2626"}),t[12]||(t[12]=J(" Sair "))])])])]),_:1})]),_:1})])])]),_:1}),o("div",gt,[e.value?(R(),j("div",mt,t[14]||(t[14]=[o("div",{class:"spinner"},null,-1)]))):(R(),j("div",bt,[o("ul",xt,[(R(!0),j(Q,null,He(a.value,(d,I)=>(R(),j("li",{key:I,class:"task-item"},[o("span",null,ce(d.taskText),1),o("button",{onClick:H=>f(I),class:"delete-btn"},[P(v(V),{icon:"mdi-light:delete"})],8,yt)]))),128))])]))]),P(W,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=d=>k.value=d),title:"Confirmar Exclusão",message:"Tem certeza que deseja excluir esta tarefa? Esta ação não pode ser desfeita.","confirm-text":"Excluir","cancel-text":"Cancelar","show-cancel":!0,onConfirm:g,onCancel:i},null,8,["modelValue"]),P(W,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=d=>b.value=d),title:"Perfil do Usuário","confirm-text":"Fechar","show-cancel":!1,onConfirm:t[4]||(t[4]=d=>b.value=!1)},{content:O(()=>[o("div",kt,[o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email ",-1)),o("input",{type:"email",value:w.value,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,8,ht),t[16]||(t[16]=o("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," O email não pode ser alterado ",-1))]),t[17]||(t[17]=o("div",{class:"text-center pt-4"},[o("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Para alterar outras informações do perfil, entre em contato com o suporte. ")],-1))])]),_:1},8,["modelValue"]),P(W,{modelValue:F.value,"onUpdate:modelValue":t[7]||(t[7]=d=>F.value=d),title:"Configurações","confirm-text":"Salvar","cancel-text":"Cancelar","show-cancel":!0,onConfirm:r,onCancel:t[8]||(t[8]=d=>F.value=!1)},{content:O(()=>[o("div",wt,[o("div",null,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tema ",-1)),o("div",Pt,[o("label",St,[o("input",{type:"radio",name:"theme",value:"light",class:"mr-2",checked:!v(c),onChange:t[5]||(t[5]=d=>c.value=!1)},null,40,$t),t[18]||(t[18]=o("span",{class:"dark:text-white"},"Claro",-1))]),o("label",Ct,[o("input",{type:"radio",name:"theme",value:"dark",class:"mr-2",checked:v(c),onChange:t[6]||(t[6]=d=>c.value=!0)},null,40,Et),t[19]||(t[19]=o("span",{class:"dark:text-white"},"Escuro",-1))])]),t[21]||(t[21]=o("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," O tema será aplicado imediatamente ",-1))]),t[22]||(t[22]=o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Notificações "),o("div",{class:"flex items-center"},[o("input",{type:"checkbox",id:"notifications",class:"mr-2"}),o("label",{for:"notifications",class:"dark:text-white"}," Receber notificações por email ")])],-1))])]),_:1},8,["modelValue"])]))}},It=Ae(Tt,[["__scopeId","data-v-95dd2415"]]);export{It as default};
